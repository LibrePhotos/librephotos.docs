"use strict";(self.webpackChunklibrephotos_docs=self.webpackChunklibrephotos_docs||[]).push([[6232],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>m});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=n.createContext({}),u=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},d=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=u(r),h=i,m=p["".concat(s,".").concat(h)]||p[h]||c[h]||o;return r?n.createElement(m,a(a({ref:t},d),{},{components:r})):n.createElement(m,a({ref:t},d))}));function m(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:i,a[1]=l;for(var u=2;u<o;u++)a[u]=r[u];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},2864:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var n=r(7462),i=(r(7294),r(3905));const o={title:"\ud83d\udcc5 Using date rules",excerpt:"How to use the date rules",sidebar_position:4},a=void 0,l={unversionedId:"user-guide/settings/date-rules",id:"user-guide/settings/date-rules",title:"\ud83d\udcc5 Using date rules",description:"Background information",source:"@site/docs/user-guide/settings/date-rules.md",sourceDirName:"user-guide/settings",slug:"/user-guide/settings/date-rules",permalink:"/docs/user-guide/settings/date-rules",draft:!1,editUrl:"https://github.com/LibrePhotos/librephotos.docs/tree/master/docs/user-guide/settings/date-rules.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"\ud83d\udcc5 Using date rules",excerpt:"How to use the date rules",sidebar_position:4},sidebar:"userguide",previous:{title:"\ud83d\udd27 Settings",permalink:"/docs/user-guide/settings/"},next:{title:"\ud83d\udcc1 Albums",permalink:"/docs/user-guide/albums"}},s={},u=[{value:"Background information",id:"background-information",level:2},{value:"Goal of the date rules",id:"goal-of-the-date-rules",level:3},{value:"How does it work?",id:"how-does-it-work",level:3},{value:"Figuring out the timezone",id:"figuring-out-the-timezone",level:3},{value:"The different rule types",id:"the-different-rule-types",level:3},{value:"How to use it",id:"how-to-use-it",level:2},{value:"Adding optional rules",id:"adding-optional-rules",level:3},{value:"Changing the order",id:"changing-the-order",level:3},{value:"Applying the rules",id:"applying-the-rules",level:3}],d={toc:u},p="wrapper";function c(e){let{components:t,...r}=e;return(0,i.kt)(p,(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"background-information"},"Background information"),(0,i.kt)("h3",{id:"goal-of-the-date-rules"},"Goal of the date rules"),(0,i.kt)("p",null,'Most images have metadata for dates, but these are split in multiple places and around 10-20% of "real world" photos have incomplete data metadata. The configurable date time parser allows us to get these dates and display them nicely as the user wants it too.'),(0,i.kt)("h3",{id:"how-does-it-work"},"How does it work?"),(0,i.kt)("p",null,"The logic for extracting local time is described as a list of rules that should be applied\none after another until one rule is able to extract date time (or until all rules are tried\nwithout success)."),(0,i.kt)("p",null,"If a rule can't fetch the time (e.g. the EXIF tag value is not present or the path doesn't match\nthe rule) then that rule is considered to be not applicable."),(0,i.kt)("h3",{id:"figuring-out-the-timezone"},"Figuring out the timezone"),(0,i.kt)("p",null,"Some sources of data might give us very rich information, e.g. timestamp + timezone,\nbut others only allow getting local time (without knowing real timestamp)."),(0,i.kt)("p",null,"For historical reasons, it is expected to have a timestamp and a timezone."),(0,i.kt)("p",null,'In some cases, it is known that the local time the rule would obtain is not in the desired\ntimezone. E.g. video date time tag QuickTime:CreateDate is by standard written in UTC rather than local time. For such cases, each rule can optionally have setting "transform_tz" set to "1" - in that case this rule should also specify "source_tz" and "report_tz" settings where\n"source_tz" is describing the timezone that the rule is getting and "report_tz" is describing\nthe timezone of the location where the photo/video was taken. Both "source_tz" and "report_tz"\nshould be one of the following:'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'"utc" - UTC timezone'),(0,i.kt)("li",{parentName:"ul"},'"gps_timezonefinder" - the timezone of the GPS location associated with the photo/video - "name:<timezone_name>"'),(0,i.kt)("li",{parentName:"ul"},"the timezone with the name <timezone_name>")),(0,i.kt)("p",null,'If either "source_tz" or "report_tz" could not be obtained, the rule is considered to be not applicable.'),(0,i.kt)("h3",{id:"the-different-rule-types"},"The different rule types"),(0,i.kt)("p",null,"Currently, supported rule types:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'"exif" - local time is taken using exif tag params','["exif_tag"]'," as obtained with exiftool"),(0,i.kt)("li",{parentName:"ul"},'"path" - time is taken from the filename using a regular expression matching'),(0,i.kt)("li",{parentName:"ul"},'"fs" - time is taken from file property. Since these are UNIX timestamps without timezones\nthey are always translated to local time using UTC.'),(0,i.kt)("li",{parentName:"ul"},'"user defined" - the date time defined by the user from the frontend')),(0,i.kt)("h2",{id:"how-to-use-it"},"How to use it"),(0,i.kt)("h3",{id:"adding-optional-rules"},"Adding optional rules"),(0,i.kt)("p",null,'To add a new rule, go to settings and navigate to the date time parsing rules. Click on the button "Add rule". You can now add optional rules like using the modified time or to create time from the file.'),(0,i.kt)("h3",{id:"changing-the-order"},"Changing the order"),(0,i.kt)("p",null,"The top rules will be applied first, and the bottom rules be applied last. To change the order, drag and drop one of the cards and save them by clicking on update."),(0,i.kt)("h3",{id:"applying-the-rules"},"Applying the rules"),(0,i.kt)("p",null,'The date rules are applied on each scan. If you changed the rules to your liking, click on "Rescan all Photos" and then the new rules will be applied'))}c.isMDXComponent=!0}}]);