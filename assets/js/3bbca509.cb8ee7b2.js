"use strict";(self.webpackChunklibrephotos_docs=self.webpackChunklibrephotos_docs||[]).push([[7370],{3905:(e,t,a)=>{a.d(t,{Zo:()=>h,kt:()=>p});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),l=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},h=function(e){var t=l(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,h=c(e,["components","mdxType","originalType","parentName"]),u=l(a),d=o,p=u["".concat(s,".").concat(d)]||u[d]||f[d]||i;return a?n.createElement(p,r(r({ref:t},h),{},{components:a})):n.createElement(p,r({ref:t},h))}));function p(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[u]="string"==typeof e?e:o,r[1]=c;for(var l=2;l<i;l++)r[l]=a[l];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8695:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>f,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var n=a(7462),o=(a(7294),a(3905));const i={title:"\ud83d\ude03 Face recognition",excerpt:"How to use the face dashboard",sidebar_position:3},r=void 0,c={unversionedId:"user-guide/face-recognition",id:"user-guide/face-recognition",title:"\ud83d\ude03 Face recognition",description:"Label a face",source:"@site/docs/user-guide/face-recognition.md",sourceDirName:"user-guide",slug:"/user-guide/face-recognition",permalink:"/docs/user-guide/face-recognition",draft:!1,editUrl:"https://github.com/LibrePhotos/librephotos.docs/tree/master/docs/user-guide/face-recognition.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"\ud83d\ude03 Face recognition",excerpt:"How to use the face dashboard",sidebar_position:3},sidebar:"userguide",previous:{title:"\ud83d\uddbc\ufe0f Viewing Photos",permalink:"/docs/user-guide/viewing-photos"},next:{title:"\ud83d\udd27 Settings",permalink:"/docs/user-guide/settings/"}},s={},l=[{value:"Label a face",id:"label-a-face",level:2},{value:"Change the label of a face",id:"change-the-label-of-a-face",level:2},{value:"Train faces",id:"train-faces",level:2},{value:"Delete faces",id:"delete-faces",level:2},{value:"Re-scan faces",id:"re-scan-faces",level:2},{value:"Workflow",id:"workflow",level:2},{value:"Pipeline",id:"pipeline",level:2},{value:"Face Detection",id:"face-detection",level:3},{value:"Face Quality",id:"face-quality",level:3},{value:"Face Recognition",id:"face-recognition",level:3},{value:"Face Clustering",id:"face-clustering",level:3},{value:"Face Cluster Merging",id:"face-cluster-merging",level:3},{value:"Face Classification",id:"face-classification",level:3}],h={toc:l},u="wrapper";function f(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,n.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"label-a-face"},"Label a face"),(0,o.kt)("p",null,"To label a face, click on the green plus button. A pop-up will show up where you can either search for an already existing person or add a new person. We want to add a new person, so input the name of the person you want to add and click on the green plus. Now the face is associated with the person."),(0,o.kt)("h2",{id:"change-the-label-of-a-face"},"Change the label of a face"),(0,o.kt)("p",null,"To change a face to a new person, click on the green plus button. Search for the person you want it to change to and click on them. Now the face is associated with the new person."),(0,o.kt)("h2",{id:"train-faces"},"Train faces"),(0,o.kt)("p",null,'If you click on the blue button in the face dashboard or if you click on the button "Train" in the settings tab, the system will try to cluster unknown faces and will try to either match them to already known faces or create a new unknown person. To see the recommendations, go to the inferred tab in the face dashboard. There you can for each face the confidence of the match. If you want to confirm a recommended face, select the face and click on the green plus button to add it to the person.'),(0,o.kt)("h2",{id:"delete-faces"},"Delete faces"),(0,o.kt)("p",null,"Sometimes the face recognition might find a face that is not actually a face. To remove it, select the face and the click on the trashcan symbol. The face is the no longer in the system and the face data is going to be deleted."),(0,o.kt)("h2",{id:"re-scan-faces"},"Re-scan faces"),(0,o.kt)("p",null,"Some user deleted all the faces with the delete face action. To get the faces again, you can re-scan the faces. This will take a while, because it will then have to look up all the photos again for faces."),(0,o.kt)("h2",{id:"workflow"},"Workflow"),(0,o.kt)("p",null,"After the first scan finished, go to the face dashboard. Label a couple of faces per person. Then train the faces with the blue button. Check if the inferred faces are accurate and add a couple of the inferred faces to the labels. Train the faces again. You will get the best results if all the persons in the pictures are known and when every label has at least a couple of faces."),(0,o.kt)("h2",{id:"pipeline"},"Pipeline"),(0,o.kt)("h3",{id:"face-detection"},"Face Detection"),(0,o.kt)("p",null,"We have two methods on how to extract faces from images. ",(0,o.kt)("inlineCode",{parentName:"p"},"hog")," is fast even on CPUs and does not take up significant RAM, which ",(0,o.kt)("inlineCode",{parentName:"p"},"cnn")," is accurate, but uses a lot of resources."),(0,o.kt)("h3",{id:"face-quality"},"Face Quality"),(0,o.kt)("p",null,"At the moment no matter, which detection methods we use, there will be face detected, which are not actually faces. The user has to manually delete these faces. In the future, we will have a new classifier, which determines if it is a face and how likely it is a face."),(0,o.kt)("h3",{id:"face-recognition"},"Face Recognition"),(0,o.kt)("p",null,"Creates a 512 dimension embedding for a given face. It makes them comparable with each other. Right now we only have the one method and should be good enough."),(0,o.kt)("h3",{id:"face-clustering"},"Face Clustering"),(0,o.kt)("p",null,"Clustering solves the issue of a system, which has no labelled persons yet. Users can get clusters they can name instead of going through a lot of faces and naming them. Clustering is stable, which means that you will get the same clusters out, when you put the same data in. If you label more faces, this will have no impact on face clustering at the moment. If you want to change how clustering is done, either change the settings, add images or delete wrong faces."),(0,o.kt)("p",null,"Steps which could be done to improve clustering are combining very similar faces from e.g. a serial recording or photo shoot, to prevent from too many small images to be clustered."),(0,o.kt)("h3",{id:"face-cluster-merging"},"Face Cluster Merging"),(0,o.kt)("p",null,"We could train a classifier to merge faces, based on previous merge decisions, which could improve the clusters even more."),(0,o.kt)("h3",{id:"face-classification"},"Face Classification"),(0,o.kt)("p",null,"Classification matches unknown faces against already known persons. Unlike clustering (which groups all faces from scratch), classification respects your previous labelling input and only tries to match faces to people you've already identified. This makes it much more accurate for large datasets where most persons are already known. You can filter between cluster and classification results in the face dashboard, and see the label probability for each inferred face. Classification probabilities are saved alongside clustering probabilities, so you can compare both approaches."))}f.isMDXComponent=!0}}]);