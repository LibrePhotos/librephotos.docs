"use strict";(self.webpackChunklibrephotos_docs=self.webpackChunklibrephotos_docs||[]).push([[5566],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>g});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(a),u=r,g=d["".concat(s,".").concat(u)]||d[u]||m[u]||o;return a?n.createElement(g,i(i({ref:t},c),{},{components:a})):n.createElement(g,i({ref:t},c))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},7624:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const o={title:"\ud83d\udcda Library Management",excerpt:"Scanning, Nextcloud integration, services, and server management",sidebar_position:12},i=void 0,l={unversionedId:"user-guide/library",id:"user-guide/library",title:"\ud83d\udcda Library Management",description:'The Library page is your central hub for managing your photo library. Access it by clicking on your avatar (top right) and selecting Library, or via the spotlight search (Ctrl+K \u2192 "Library").',source:"@site/docs/user-guide/library.md",sourceDirName:"user-guide",slug:"/user-guide/library",permalink:"/docs/user-guide/library",draft:!1,editUrl:"https://github.com/LibrePhotos/librephotos.docs/tree/master/docs/user-guide/library.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{title:"\ud83d\udcda Library Management",excerpt:"Scanning, Nextcloud integration, services, and server management",sidebar_position:12},sidebar:"userguide",previous:{title:"\ud83d\udd0e Search",permalink:"/docs/user-guide/search"},next:{title:"API authentication",permalink:"/docs/user-guide/api-authentication"}},s={},p=[{value:"Overview Stats",id:"overview-stats",level:2},{value:"Scanning",id:"scanning",level:2},{value:"Scan Photos (File System)",id:"scan-photos-file-system",level:3},{value:"Scan Progress",id:"scan-progress",level:3},{value:"Nextcloud Integration",id:"nextcloud-integration",level:2},{value:"Setup",id:"setup",level:3},{value:"Scanning from Nextcloud",id:"scanning-from-nextcloud",level:3},{value:"Library Actions",id:"library-actions",level:2},{value:"Service Management",id:"service-management",level:2},{value:"Server Information",id:"server-information",level:2},{value:"Server Stats",id:"server-stats",level:3},{value:"Storage Display",id:"storage-display",level:3},{value:"Server Logs",id:"server-logs",level:3},{value:"Image Version",id:"image-version",level:3},{value:"Management Commands",id:"management-commands",level:2}],c={toc:p},d="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"Library")," page is your central hub for managing your photo library. Access it by clicking on your avatar (top right) and selecting ",(0,r.kt)("strong",{parentName:"p"},"Library"),", or via the spotlight search (",(0,r.kt)("inlineCode",{parentName:"p"},"Ctrl+K"),' \u2192 "Library").'),(0,r.kt)("h2",{id:"overview-stats"},"Overview Stats"),(0,r.kt)("p",null,"At the top of the Library page, you'll see quick stats about your library:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Photos")," \u2014 Total number of photos and the number of days they span"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"People")," \u2014 Number of recognized people, with a breakdown of inferred, labeled, and unknown faces"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Faces")," \u2014 Total faces detected"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Events")," \u2014 Number of auto-generated event albums")),(0,r.kt)("h2",{id:"scanning"},"Scanning"),(0,r.kt)("h3",{id:"scan-photos-file-system"},"Scan Photos (File System)"),(0,r.kt)("p",null,"Click ",(0,r.kt)("strong",{parentName:"p"},'"Scan photos"')," to scan your configured scan directory for new photos. The scan process:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Discovers new image and video files"),(0,r.kt)("li",{parentName:"ol"},"Groups related files (RAW+JPEG pairs, Live Photos) as ",(0,r.kt)("a",{parentName:"li",href:"/docs/user-guide/stacks-and-file-variants"},"file variants")),(0,r.kt)("li",{parentName:"ol"},"Creates thumbnails"),(0,r.kt)("li",{parentName:"ol"},"Extracts EXIF metadata"),(0,r.kt)("li",{parentName:"ol"},"Runs face detection"),(0,r.kt)("li",{parentName:"ol"},"Generates AI captions and tags"),(0,r.kt)("li",{parentName:"ol"},"Performs reverse geocoding"),(0,r.kt)("li",{parentName:"ol"},"Calculates CLIP embeddings for semantic search")),(0,r.kt)("p",null,"You can also ",(0,r.kt)("strong",{parentName:"p"},"rescan")," to re-process all existing photos."),(0,r.kt)("h3",{id:"scan-progress"},"Scan Progress"),(0,r.kt)("p",null,"Scan progress is shown in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/user-guide/job-system"},"Job System"),". The scan is split into smaller tasks, prioritizing thumbnail creation so photos appear in the UI quickly while heavier processing (faces, tags) happens in the background."),(0,r.kt)("h2",{id:"nextcloud-integration"},"Nextcloud Integration"),(0,r.kt)("p",null,"If you have a Nextcloud instance, you can scan photos directly from it without manually transferring files."),(0,r.kt)("h3",{id:"setup"},"Setup"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"On the Library page, find the ",(0,r.kt)("strong",{parentName:"li"},"Nextcloud")," section"),(0,r.kt)("li",{parentName:"ol"},"Enter your Nextcloud server URL, username, and password"),(0,r.kt)("li",{parentName:"ol"},'A green indicator will appear next to "Nextcloud Scan Directory" once connected'),(0,r.kt)("li",{parentName:"ol"},"Click the folder icon to browse and select your Nextcloud photo directory")),(0,r.kt)("h3",{id:"scanning-from-nextcloud"},"Scanning from Nextcloud"),(0,r.kt)("p",null,"Click ",(0,r.kt)("strong",{parentName:"p"},'"Scan photos (Nextcloud)"')," to download and scan photos from your configured Nextcloud directory. Files are copied to the local filesystem under ",(0,r.kt)("inlineCode",{parentName:"p"},"nextcloud_media/<username>/")," before being processed."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Video files are currently not supported for Nextcloud scanning (",(0,r.kt)("a",{parentName:"p",href:"https://github.com/LibrePhotos/librephotos/issues/278"},"#278"),").")),(0,r.kt)("h2",{id:"library-actions"},"Library Actions"),(0,r.kt)("p",null,"The Library page provides quick access to common maintenance actions:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Action"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Scan photos")),(0,r.kt)("td",{parentName:"tr",align:null},"Scan for new photos in the file system")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Rescan photos")),(0,r.kt)("td",{parentName:"tr",align:null},"Re-process all existing photos")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Train faces")),(0,r.kt)("td",{parentName:"tr",align:null},"Run face clustering and classification")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Rescan faces")),(0,r.kt)("td",{parentName:"tr",align:null},"Re-detect faces in all photos")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Generate events")),(0,r.kt)("td",{parentName:"tr",align:null},"Create or regenerate auto albums")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Delete missing photos")),(0,r.kt)("td",{parentName:"tr",align:null},"Remove database entries for photos no longer on disk")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Scan photos (Nextcloud)")),(0,r.kt)("td",{parentName:"tr",align:null},"Scan photos from a connected Nextcloud instance")))),(0,r.kt)("h2",{id:"service-management"},"Service Management"),(0,r.kt)("p",null,"LibrePhotos runs several background ML services. Administrators can monitor and control them from the ",(0,r.kt)("strong",{parentName:"p"},"Admin Area"),":"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Service"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"image_similarity")),(0,r.kt)("td",{parentName:"tr",align:null},"CLIP-based image similarity index")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"thumbnail")),(0,r.kt)("td",{parentName:"tr",align:null},"Thumbnail generation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"face_recognition")),(0,r.kt)("td",{parentName:"tr",align:null},"Face detection and recognition")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"clip_embeddings")),(0,r.kt)("td",{parentName:"tr",align:null},"CLIP embedding computation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"llm")),(0,r.kt)("td",{parentName:"tr",align:null},"Large language model for captioning")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"image_captioning")),(0,r.kt)("td",{parentName:"tr",align:null},"Image caption generation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"exif")),(0,r.kt)("td",{parentName:"tr",align:null},"EXIF metadata extraction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"tags")),(0,r.kt)("td",{parentName:"tr",align:null},"Photo tag generation (Places365 or SigLIP 2 depending on your Tagging Model setting)")))),(0,r.kt)("p",null,"For each service, you can:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"View ",(0,r.kt)("strong",{parentName:"li"},"health status")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Start")," or ",(0,r.kt)("strong",{parentName:"li"},"stop")," the service"),(0,r.kt)("li",{parentName:"ul"},"Services are automatically started with Django and monitored by a cron job")),(0,r.kt)("h2",{id:"server-information"},"Server Information"),(0,r.kt)("h3",{id:"server-stats"},"Server Stats"),(0,r.kt)("p",null,"Administrators can view system information in the Admin Area:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"CPU")," \u2014 Model, core count, usage"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"RAM")," \u2014 Total and used memory"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"GPU")," \u2014 GPU model and memory (if available)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Storage")," \u2014 Total, used, and free disk space"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Per-user stats")," \u2014 Photo counts per user")),(0,r.kt)("h3",{id:"storage-display"},"Storage Display"),(0,r.kt)("p",null,"The sidebar shows a storage usage bar indicating how much disk space your photo library is using relative to the total available space."),(0,r.kt)("h3",{id:"server-logs"},"Server Logs"),(0,r.kt)("p",null,"Administrators can download the server log file (",(0,r.kt)("inlineCode",{parentName:"p"},"ownphotos.log"),") directly from the Admin Area for debugging purposes."),(0,r.kt)("h3",{id:"image-version"},"Image Version"),(0,r.kt)("p",null,"The sidebar shows the current backend Docker image version. Hover over it to see the full version tag and git hash."),(0,r.kt)("h2",{id:"management-commands"},"Management Commands"),(0,r.kt)("p",null,"For advanced users with shell access, LibrePhotos provides several management commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Scan all users' photo directories\npython manage.py scan\n\n# Full rescan (re-process all photos)\npython manage.py scan -f\n\n# Scan specific files\npython manage.py scan -s /path/to/file.jpg\n\n# Build similarity index for all users\npython manage.py build_similarity_index\n\n# Save metadata to image files or XMP sidecars\npython manage.py save_metadata\n\n# Start ML services\npython manage.py start_service\n\n# Clear site-wide cache\npython manage.py clear_cache\n\n# Create a new user\npython manage.py createuser\n\n# Create an admin user\npython manage.py createadmin\n")))}m.isMDXComponent=!0}}]);