"use strict";(self.webpackChunklibrephotos_docs=self.webpackChunklibrephotos_docs||[]).push([[9903],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),m=p(n),c=o,g=m["".concat(s,".").concat(c)]||m[c]||u[c]||l;return n?a.createElement(g,i(i({ref:t},d),{},{components:n})):a.createElement(g,i({ref:t},d))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,i=new Array(l);i[0]=c;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[m]="string"==typeof e?e:o,i[1]=r;for(var p=2;p<l;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8116:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>p});var a=n(7462),o=(n(7294),n(3905));const l={title:"Offline Usage",excerpt:"Learn how to configure LibrePhotos for complete offline usage by manually downloading and placing the required machine learning models. This guide provides step-by-step instructions to ensure your LibrePhotos installation functions seamlessly without an Internet connection.",sidebar_position:5},i=void 0,r={unversionedId:"user-guide/offline-setup",id:"user-guide/offline-setup",title:"Offline Usage",description:"To enable LibrePhotos to work completely offline by manually downloading and placing the required machine learning models, you can follow the steps outlined below. This guide assumes that you have access to the Internet initially to download the models and then configure LibrePhotos to run in an offline environment.",source:"@site/docs/user-guide/offline-setup.md",sourceDirName:"user-guide",slug:"/user-guide/offline-setup",permalink:"/docs/user-guide/offline-setup",draft:!1,editUrl:"https://github.com/LibrePhotos/librephotos.docs/tree/master/docs/user-guide/offline-setup.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Offline Usage",excerpt:"Learn how to configure LibrePhotos for complete offline usage by manually downloading and placing the required machine learning models. This guide provides step-by-step instructions to ensure your LibrePhotos installation functions seamlessly without an Internet connection.",sidebar_position:5},sidebar:"userguide",previous:{title:" \ud83d\udcc1 Upload",permalink:"/docs/user-guide/mobile/librephotos-mobile/upload"},next:{title:"\ud83d\uddfa Places",permalink:"/docs/user-guide/places"}},s={},p=[{value:"Step 1: Download the Models Manually",id:"step-1-download-the-models-manually",level:3},{value:"Step 2: Place the Models in the Correct Location",id:"step-2-place-the-models-in-the-correct-location",level:3},{value:"Step 3: Verify Model Placement",id:"step-3-verify-model-placement",level:3},{value:"Step 4: Run LibrePhotos",id:"step-4-run-librephotos",level:3}],d={toc:p},m="wrapper";function u(e){let{components:t,...n}=e;return(0,o.kt)(m,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"To enable LibrePhotos to work completely offline by manually downloading and placing the required machine learning models, you can follow the steps outlined below. This guide assumes that you have access to the Internet initially to download the models and then configure LibrePhotos to run in an offline environment."),(0,o.kt)("h3",{id:"step-1-download-the-models-manually"},"Step 1: Download the Models Manually"),(0,o.kt)("p",null,"Manually download the necessary models from their respective URLs. Below is a list of models used by LibrePhotos, along with their download links:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"im2txt")," (Captioning)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"URL: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://github.com/LibrePhotos/librephotos-docker/releases/download/0.1/im2txt.tar.gz")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"clip-embeddings")," (CLIP)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"URL: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://github.com/LibrePhotos/librephotos-docker/releases/download/0.1/clip-embeddings.tar.gz")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"places365")," (Categories)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"URL: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://github.com/LibrePhotos/librephotos-docker/releases/download/0.1/places365.tar.gz")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"resnet18")," (Categories)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"URL: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://download.pytorch.org/models/resnet18-5c106cde.pth")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"im2txt_onnx")," (Captioning)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"URL: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://github.com/LibrePhotos/librephotos-docker/releases/download/0.1/im2txt_onnx.tar.gz")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"blip_base_capfilt_large")," (Captioning) (optional)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"URL: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://huggingface.co/derneuere/librephotos_models/resolve/main/blip_large.tar.gz?download=true")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"mistral-7b-v0.1.Q5_K_M")," (LLM) (optional)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"URL: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://huggingface.co/TheBloke/Mistral-7B-v0.1-GGUF/resolve/main/mistral-7b-v0.1.Q5_K_M.gguf?download=true")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"mistral-7b-instruct-v0.2.Q5_K_M")," (LLM) (optional)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"URL: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://huggingface.co/TheBloke/Mistral-7B-Instruct-v0.2-GGUF/resolve/main/mistral-7b-instruct-v0.2.Q5_K_M.gguf?download=true")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"joytag")," (Tagging) (optional \u2014 only if using JoyTag tagging model)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Model: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://huggingface.co/fancyfeast/joytag/resolve/main/model.onnx")),(0,o.kt)("li",{parentName:"ul"},"Tags: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://huggingface.co/fancyfeast/joytag/resolve/main/top_tags.txt")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"siglip2")," (Tagging) (optional \u2014 only if using SigLIP 2 tagging model)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Vision model: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://huggingface.co/onnx-community/siglip2-base-patch16-384-ONNX/resolve/main/onnx/vision_model.onnx")),(0,o.kt)("li",{parentName:"ul"},"Text model: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://huggingface.co/onnx-community/siglip2-base-patch16-384-ONNX/resolve/main/onnx/text_model.onnx")),(0,o.kt)("li",{parentName:"ul"},"Tokenizer: ",(0,o.kt)("inlineCode",{parentName:"li"},"https://huggingface.co/onnx-community/siglip2-base-patch16-384-ONNX/resolve/main/tokenizer.model"))))),(0,o.kt)("h3",{id:"step-2-place-the-models-in-the-correct-location"},"Step 2: Place the Models in the Correct Location"),(0,o.kt)("p",null,"Once the models are downloaded, place them in the following directory:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"<LibrePhotos Media Root Directory>/data_models/\n")),(0,o.kt)("p",null,"For example, if your ",(0,o.kt)("inlineCode",{parentName:"p"},"MEDIA_ROOT")," is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"/var/lib/librephotos"),", then the models should be placed in ",(0,o.kt)("inlineCode",{parentName:"p"},"/var/lib/librephotos/data_models/"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"im2txt.tar.gz")," -> Unpack into ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/im2txt/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"clip-embeddings.tar.gz")," -> Unpack into ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/clip-embeddings/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"places365.tar.gz")," -> Unpack into ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/places365/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"resnet18-5c106cde.pth")," -> Place directly as ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/resnet18-5c106cde.pth")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"im2txt_onnx.tar.gz")," -> Unpack into ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/im2txt_onnx/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"blip_large.tar.gz")," -> Unpack into ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/blip/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"mistral-7b-v0.1.Q5_K_M.gguf")," -> Place directly as ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/mistral-7b-v0.1.Q5_K_M.gguf")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"mistral-7b-instruct-v0.2.Q5_K_M.gguf")," -> Place directly as ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/mistral-7b-instruct-v0.2.Q5_K_M.gguf")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"joytag model.onnx")," -> Place as ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/joytag/model.onnx")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"joytag top_tags.txt")," -> Place as ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/joytag/top_tags.txt")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"siglip2 vision_model.onnx")," -> Place as ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/siglip2/vision_model.onnx")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"siglip2 text_model.onnx")," -> Place as ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/siglip2/text_model.onnx")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"siglip2 tokenizer.model")," -> Place as ",(0,o.kt)("inlineCode",{parentName:"li"},"<MEDIA_ROOT>/data_models/siglip2/tokenizer.model"))),(0,o.kt)("h3",{id:"step-3-verify-model-placement"},"Step 3: Verify Model Placement"),(0,o.kt)("p",null,"Ensure that all models are correctly placed and unpacked in their respective directories. The structure should look something like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"data_models/\n    \u251c\u2500\u2500 im2txt/\n    \u251c\u2500\u2500 clip-embeddings/\n    \u251c\u2500\u2500 places365/\n    \u251c\u2500\u2500 resnet18-5c106cde.pth\n    \u251c\u2500\u2500 im2txt_onnx/\n    \u251c\u2500\u2500 blip/\n    \u251c\u2500\u2500 mistral-7b-v0.1.Q5_K_M.gguf\n    \u251c\u2500\u2500 mistral-7b-instruct-v0.2.Q5_K_M.gguf\n    \u251c\u2500\u2500 joytag/\n    \u2502   \u251c\u2500\u2500 model.onnx\n    \u2502   \u2514\u2500\u2500 top_tags.txt\n    \u2514\u2500\u2500 siglip2/\n        \u251c\u2500\u2500 vision_model.onnx\n        \u251c\u2500\u2500 text_model.onnx\n        \u2514\u2500\u2500 tokenizer.model\n")),(0,o.kt)("h3",{id:"step-4-run-librephotos"},"Step 4: Run LibrePhotos"),(0,o.kt)("p",null,"You can now run LibrePhotos without an active Internet connection. The application will use the models you manually downloaded and placed in the ",(0,o.kt)("inlineCode",{parentName:"p"},"data_models")," directory."))}u.isMDXComponent=!0}}]);